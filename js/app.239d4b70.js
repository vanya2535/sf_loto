(function(){"use strict";var e={443:function(e,t,r){var s=r(9242),o=r(3396);const n={class:"router-view"};function a(e,t,r,s,a,i){const u=(0,o.up)("Header"),l=(0,o.up)("router-view"),d=(0,o.up)("Footer"),p=(0,o.up)("AuthModal"),c=(0,o.up)("FloatingMessage");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(u),(0,o._)("main",n,[(0,o.Wm)(l)]),(0,o.Wm)(d),a.isAuthModalVisible?((0,o.wg)(),(0,o.j4)(p,{key:0,modelValue:a.isAuthModalVisible,"onUpdate:modelValue":t[0]||(t[0]=e=>a.isAuthModalVisible=e)},null,8,["modelValue"])):(0,o.kq)("",!0),(0,o.Wm)(c)],64)}var i=r(8541),u=r(65),l=r(7139),d=r(8197);const p=e=>((0,o.dD)("data-v-67c2c014"),e=e(),(0,o.Cn)(),e),c={class:"header d-flex"},m=p((()=>(0,o._)("div",{class:"line"},null,-1))),h=p((()=>(0,o._)("div",{class:"line"},null,-1))),_=p((()=>(0,o._)("div",{class:"line"},null,-1))),v=[m,h,_],f=p((()=>(0,o._)("img",{src:d,alt:"",srcset:""},null,-1))),g={class:"header__info"},w=(0,o.Uk)("СФ ЛОТО"),b=p((()=>(0,o._)("div",{class:"header__title"},"Играй и выигрывай!",-1))),y=p((()=>(0,o._)("div",{class:"header__subtitle"},"не является настоящим лото",-1)));function E(e,t,r,s,n,a){const i=(0,o.up)("router-link"),u=(0,o.up)("NavbarMenu");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("header",c,[(0,o._)("button",{class:(0,l.C_)(["header__button",{header__button_active:n.isMenuOpen}]),onClick:t[0]||(t[0]=e=>n.isMenuOpen=!n.isMenuOpen)},v,2),f,(0,o._)("div",g,[(0,o.Wm)(i,{class:"header__link",to:"/"},{default:(0,o.w5)((()=>[w])),_:1}),b,y])]),n.isMenuOpen?((0,o.wg)(),(0,o.j4)(u,{key:0,modelValue:n.isMenuOpen,"onUpdate:modelValue":t[1]||(t[1]=e=>n.isMenuOpen=e)},null,8,["modelValue"])):(0,o.kq)("",!0)],64)}function k(e,t,r,n,a,i){return(0,o.wg)(),(0,o.iD)("nav",{class:"overlay menu",onClick:t[3]||(t[3]=t=>e.overlay=!1)},[(0,o._)("div",{class:"navbar d-flex",onClick:t[2]||(t[2]=(0,s.iM)((()=>{}),["stop"]))},[e.IS_AUTHORIZED?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"btn btn_outlined btn_sm",onClick:t[0]||(t[0]=(...e)=>i.openAuthModal&&i.openAuthModal(...e))}," Войти ")),e.IS_AUTHORIZED?((0,o.wg)(),(0,o.iD)("button",{key:1,class:"btn btn_outlined btn_sm",onClick:t[1]||(t[1]=(...e)=>i.logout&&i.logout(...e))}," Выйти ")):(0,o.kq)("",!0)])])}var D={props:{modelValue:{type:Boolean,required:!0}},computed:{overlay:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},A={name:"NavbarMenu",mixins:[D],computed:{...(0,u.Se)("user",["IS_AUTHORIZED"])},methods:{...(0,u.OI)("user",["LOGOUT"]),openAuthModal(){this.overlay=!1,this.$eventBus.emit("openAuthModal")},logout(){this.LOGOUT(),this.$eventBus.emit("pushMessage",{message:"Вы успешно вышли из учетной записи",type:"success"})}}},V=r(89);const M=(0,V.Z)(A,[["render",k],["__scopeId","data-v-67f38688"]]);var O=M,S={name:"Header",components:{NavbarMenu:O},data(){return{isMenuOpen:!1}}};const T=(0,V.Z)(S,[["render",E],["__scopeId","data-v-67c2c014"]]);var B=T;const I=e=>((0,o.dD)("data-v-47087d2e"),e=e(),(0,o.Cn)(),e),U={class:"footer"},C=I((()=>(0,o._)("div",{class:"footer__info"},"© СФ ЛОТО, 2008–2022",-1))),x=I((()=>(0,o._)("a",{class:"footer__address",href:"https://www.google.com/search?sxsrf=APq-WBtAJEhoC6htz20V62BeRyeXjw-CMw:1649095365256&q=%D1%81%D0%BC%D0%BE%D0%BB%D0%B5%D0%BD%D1%81%D0%BA%D0%B8%D0%B9+%D1%84%D0%B8%D0%BB%D0%B8%D0%B0%D0%BB+%D0%BC%D1%8D%D0%B8+%D0%B0%D0%B4%D1%80%D0%B5%D1%81&ludocid=3953531601185315818&sa=X&ved=2ahUKEwjYn8n7_vr2AhWKy4sKHdzJD5AQ6BN6BAhHEAI&biw=2560&bih=1289&dpr=1",target:"_blank"}," Энергетический пр-д, 1, Смоленск, Смоленская обл., 214013 ",-1))),R=[C,x];function P(e,t,r,s,n,a){return(0,o.wg)(),(0,o.iD)("footer",U,R)}var j={name:"Footer"};const Z=(0,V.Z)(j,[["render",P],["__scopeId","data-v-47087d2e"]]);var F=Z;const H={class:"auth-modal__inputs"},G=["disabled"];function N(e,t,r,n,a,i){const u=(0,o.up)("AuthStepper"),l=(0,o.up)("Forminput");return(0,o.wg)(),(0,o.iD)("div",{class:"overlay",onClick:t[9]||(t[9]=t=>e.overlay=!1)},[(0,o._)("form",{class:"auth-modal overlay__modal",onClick:t[7]||(t[7]=(0,s.iM)((()=>{}),["stop"])),onSubmit:t[8]||(t[8]=(0,s.iM)(((...e)=>i.submit&&i.submit(...e)),["prevent"]))},[(0,o.Wm)(u,{modelValue:a.step,"onUpdate:modelValue":t[0]||(t[0]=e=>a.step=e)},null,8,["modelValue"]),(0,o._)("div",H,[(0,o.Wm)(l,{modelValue:a.form.username,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.username=e),name:"username",label:"Имя пользователя",autocomplete:"username",error:e.getError("username"),onInput:t[2]||(t[2]=t=>e.resetErrors("username"))},null,8,["modelValue","error"]),(0,o.Wm)(l,{modelValue:a.form.password,"onUpdate:modelValue":t[3]||(t[3]=e=>a.form.password=e),name:0===a.step?"current-password":"new-password",label:"Пароль",inputType:"password",autocomplete:0===a.step?"current-password":"new-password",error:e.getError("password"),onInput:t[4]||(t[4]=t=>e.resetErrors("password"))},null,8,["modelValue","name","autocomplete","error"]),(0,o.wy)((0,o.Wm)(l,{modelValue:a.confirmPassword,"onUpdate:modelValue":t[5]||(t[5]=e=>a.confirmPassword=e),name:"new-password-confirm",label:"Пароль",inputType:"password",autocomplete:"new-password",error:e.getError("confirmPassword"),onInput:t[6]||(t[6]=t=>e.resetErrors("confirmPassword"))},null,8,["modelValue","error"]),[[s.F8,1===a.step]])]),(0,o._)("button",{class:"auth-modal__submit-button btn btn_graphite btn_block btn_med",type:"submit",disabled:a.loading}," Подтвердить ",8,G)],32)])}const $=e=>((0,o.dD)("data-v-1463a76b"),e=e(),(0,o.Cn)(),e),W={class:"input__wrapper"},q=["id","name","type","autocomplete"],z=["for"],L={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K=$((()=>(0,o._)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1))),Y=$((()=>(0,o._)("circle",{cx:"12",cy:"12",r:"3"},null,-1))),J=[K,Y],X={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Q=$((()=>(0,o._)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24M1 1l22 22"},null,-1))),ee=[Q],te={class:"input__error"};function re(e,t,r,n,a,i){return(0,o.wg)(),(0,o.iD)("div",{class:(0,l.C_)({error:r.error.length})},[(0,o._)("div",W,[(0,o.wy)((0,o._)("input",{id:r.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t),name:r.name,type:i.type,class:(0,l.C_)(["input",{"input_not-empty":e.value.length,input_error:!!r.error.length}]),autocomplete:r.autocomplete},null,10,q),[[s.YZ,e.value]]),(0,o._)("label",{class:"input__label",for:r.name},(0,l.zw)(r.label),9,z),"password"===r.inputType?((0,o.wg)(),(0,o.iD)("button",{key:0,class:"input__mode-button d-flex",type:"button",onClick:t[1]||(t[1]=e=>a.isValueVisible=!a.isValueVisible)},[(0,o.wy)(((0,o.wg)(),(0,o.iD)("svg",L,J,512)),[[s.F8,!a.isValueVisible]]),(0,o.wy)(((0,o.wg)(),(0,o.iD)("svg",X,ee,512)),[[s.F8,a.isValueVisible]])])):(0,o.kq)("",!0)]),(0,o._)("p",te,(0,l.zw)(r.error),1)],2)}var se={props:{modelValue:{type:[String,Number],required:!0}},computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},oe={name:"FormInput",mixins:[se],props:{name:{type:String,default:"input"},label:{type:String,default:""},inputType:{type:String,default:"text",validator:e=>["text","password"].includes(e)},autocomplete:{type:String,default:"off"},error:{type:String,default:""}},data(){return{isValueVisible:!1}},computed:{type(){return"text"===this.inputType||this.isValueVisible?"text":"password"}}};const ne=(0,V.Z)(oe,[["render",re],["__scopeId","data-v-1463a76b"]]);var ae=ne;const ie={class:"stepper"},ue=["onClick"];function le(e,t,r,s,n,a){return(0,o.wg)(),(0,o.iD)("div",ie,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.steps,((t,r)=>((0,o.wg)(),(0,o.iD)("button",{key:r,class:(0,l.C_)(["stepper__step",{stepper__step_active:r===e.value}]),type:"button",onClick:t=>e.value=r},(0,l.zw)(t),11,ue)))),128)),(0,o._)("div",{class:(0,l.C_)(["stepper__underline",{stepper__underline_right:1===e.value}])},null,2)])}var de={name:"AuthStepper",mixins:[se],data(){return{steps:["Войти","Регистрация"]}}};const pe=(0,V.Z)(de,[["render",le],["__scopeId","data-v-0403cd46"]]);var ce=pe,me={data(){return{validationErrors:{}}},computed:{hasErrors(){return!!Object.values(this.validationErrors).length}},methods:{resetErrors(...e){for(let t of e)delete this.validationErrors[t]},getError(e){return this.validationErrors[e]||""},setError(e,t){this.validationErrors[e]=t},catchErrors(e){if(e?.data)if(e.data.message)this.$eventBus.emit("pushMessage",{message:e.data.message,type:"error"});else if(e.data.errors)for(let t of e.data.errors)this.setError(t.param,t.msg)}}},he={name:"AuthModal",mixins:[D,me],components:{Forminput:ae,AuthStepper:ce},data(){return{step:0,loading:!1,title:["Войти в существующую учетную запись","Зарегистрировать новую учетную запись"],form:{username:"",password:""},confirmPassword:""}},methods:{...(0,u.nv)("user",["LOGIN","REGISTER"]),async submit(){for(let t of["username","password"])this.form[t].length||this.setError(t,"Поле обязательно для заполнения");if(1===this.step&&this.confirmPassword!==this.form.password&&this.setError("confirmPassword","Пароли не совпадают"),!this.hasErrors)try{switch(this.loading=!0,this.step){case 0:await this.LOGIN({...this.form,role:"USER"}),this.$eventBus.emit("pushMessage",{message:"Вы успешно вошли в учетную запись",type:"success"});break;case 1:await this.REGISTER(this.form),this.$eventBus.emit("pushMessage",{message:"Вы успешно зарегистрировали учетную запись",type:"success"});break}this.overlay=!1}catch(e){console.error(e.response),this.catchErrors(e?.response)}finally{this.loading=!1}}}};const _e=(0,V.Z)(he,[["render",N],["__scopeId","data-v-7c61a8d2"]]);var ve=_e;function fe(e,t,r,n,a,i){return(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{ref:"message",class:(0,l.C_)(["message",`message_${a.type}`])},(0,l.zw)(a.message),3)),[[s.F8,a.message.length]])}let ge;var we={name:"FloatingMessage",data(){return{message:"",type:"error"}},created(){this.$eventBus.on("pushMessage",(({message:e,type:t})=>{this.message="",this.type=t||"error",this.$nextTick((()=>{this.message=e})),clearTimeout(ge),ge=setTimeout((()=>{this.message=""}),4e3)}))}};const be=(0,V.Z)(we,[["render",fe],["__scopeId","data-v-561b1f75"]]);var ye=be,Ee={name:"App",components:{Header:B,Footer:F,AuthModal:ve,FloatingMessage:ye},data(){return{isAuthModalVisible:!1}},methods:{...(0,u.OI)("user",["SET_USER_DATA"])},async created(){this.$eventBus.on("openAuthModal",(()=>{this.isAuthModalVisible=!0}));const{cookies:e}=(0,i.fP)(),t={token:e.get("auth_token"),user:{id:e.get("user_id"),username:e.get("username"),roles:JSON.parse(e.get("user_roles"))}};t.token&&Object.values(t.user).every((e=>e.length))&&this.SET_USER_DATA(t)}};const ke=(0,V.Z)(Ee,[["render",a]]);var De=ke,Ae=r(678);const Ve={class:"index"};function Me(e,t,r,s,n,a){return(0,o.wg)(),(0,o.iD)("div",Ve)}var Oe={name:"Index"};const Se=(0,V.Z)(Oe,[["render",Me]]);var Te=Se;const Be=[{name:"Index",path:"/",component:Te}],Ie=(0,Ae.p7)({history:(0,Ae.PO)("/sf_loto/"),routes:Be});var Ue=Ie,Ce=r(6265),xe=r.n(Ce);xe().defaults.baseURL="https://sf-loto.herokuapp.com/",xe().interceptors.request.use((e=>{const t=Ge.state.user.token;return t&&(e.headers.Authorization=t),e}));var Re=xe(),Pe={async REGISTER({commit:e},{username:t,password:r,role:s}){try{const{data:o}=await Re.post("/auth/register",{username:t,password:r,role:s});return e("SET_USER_DATA",o),Promise.resolve(o)}catch(o){return Promise.reject(o)}},async LOGIN({commit:e},{username:t,password:r}){try{const{data:s}=await Re.post("/auth/login",{username:t,password:r});return e("SET_USER_DATA",s),Promise.resolve(s)}catch(s){return Promise.reject(s)}}};const{cookies:je}=(0,i.fP)();var Ze={SET_USER_DATA(e,{token:t,user:{id:r,username:s,roles:o}}){e.id=r,e.username=s,e.roles=o,e.token=t,je.set("auth_token",t),je.set("user_id",r),je.set("username",s),je.set("user_roles",JSON.stringify(o))},LOGOUT(e){e.id="",e.username="",e.roles=[],e.token="",je.remove("auth_token"),je.remove("user_id"),je.remove("username"),je.remove("user_roles")}},Fe={GET_USER_USERNAME(e){return e.username},GET_USER_ROLES(e){return e.roles},GET_USER_AUTH_TOKEN(e){return e.token},IS_AUTHORIZED(e){return!!e.token}},He={state:()=>({id:"",username:"",roles:[],token:""}),actions:Pe,mutations:Ze,getters:Fe},Ge=(0,u.MT)({state:{},getters:{},mutations:{},actions:{},modules:{user:{namespaced:!0,...He}}}),Ne=r(1373),$e={install:(e,t)=>{e.config.globalProperties.$eventBus=(0,Ne.Z)()}};const We=(0,s.ri)(De);We.use($e),We.use(Ge).use(Ue).mount("#app")},8197:function(e,t,r){e.exports=r.p+"img/lottery.7827f1fc.svg"}},t={};function r(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,s,o,n){if(!s){var a=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],n=e[d][2];for(var i=!0,u=0;u<s.length;u++)(!1&n||a>=n)&&Object.keys(r.O).every((function(e){return r.O[e](s[u])}))?s.splice(u--,1):(i=!1,n<a&&(a=n));if(i){e.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,o,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.p="/sf_loto/"}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,n,a=s[0],i=s[1],u=s[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(u)var d=u(r)}for(t&&t(s);l<a.length;l++)n=a[l],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(d)},s=self["webpackChunksf_loto"]=self["webpackChunksf_loto"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=r.O(void 0,[998],(function(){return r(443)}));s=r.O(s)})();
//# sourceMappingURL=app.239d4b70.js.map